<div class="container-fluid">
  <h1 class="title">lista de tareas</h1>
  <table class="table table-bordered">
    <thead>
      <tr>
        <th>CASAS</th>
        <th>ASIGNADO A</th>
        <th>CATEGORÍA</th>
        <th>TAREA</th>
        <th>FECHA</th>
        <th>ESTADO</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <ng-container *ngFor="let task of response?.tasks; let i = index">
        <tr
          [ngClass]="{
            'table-secondary': i % 2 !== 0,
            'table-white': i % 2 === 0
          }"
        >
          <td>{{ task.house }}</td>
          <td>{{ task.assignedTo }}</td>
          <td>{{ task.category }}</td>
          <td>{{ task.name }}</td>
          <td>{{ task.finishDate | date }}</td>
          <td>{{ getTaskString(task.state) }}</td>
          <td>
            <button class="btn btn-link" (click)="toggleDetails(i)">
              <span *ngIf="!isExpanded(i)" class="fa fa-chevron-down"></span>
              <span *ngIf="isExpanded(i)" class="fa fa-chevron-up"></span>
            </button>
          </td>
        </tr>
        <tr *ngIf="isExpanded(i)">
          <td colspan="7">
            <div class="details">
              <p>Fecha de creación: {{ task.createdAt | date }}</p>
              <p>Descripción: {{ task.description }}</p>
              <p class="state-chip">Estado: {{ getTaskString(task.state) }}</p>
              <p>Fecha de finalización: {{ task.finishDate | date }}</p>
            </div>
          </td>
        </tr>
      </ng-container>
    </tbody>
  </table>
</div>
